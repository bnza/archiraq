import {getExtentFromWfsGetFeatures} from '@/utils/ol';

const pointJson = {
    'type': 'FeatureCollection',
    'features': [{
        'type': 'Feature',
        'id': 'vw_site_survey_point.fid-7fc7373b_16df8d89a35_2d5d',
        'geometry': {'type': 'Point', 'coordinates': [45.5, 33.8]},
        'geometry_name': 'geom',
        'properties': {'id': 9176}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_point.fid-7fc7373b_16df8d89a35_2d5f',
        'geometry': {'type': 'Point', 'coordinates': [45.7, 33.7]},
        'geometry_name': 'geom',
        'properties': {'id': 9204}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_point.fid-7fc7373b_16df8d89a35_2d60',
        'geometry': {'type': 'Point', 'coordinates': [45.4, 33.8]},
        'geometry_name': 'geom',
        'properties': {'id': 9207}
    }],
    'totalFeatures': 3,
    'numberMatched': 3,
    'numberReturned': 3,
    'timeStamp': '2019-10-23T14:08:09.797Z',
    'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}
};

const multyPolygonJson = {
    'type': 'FeatureCollection',
    'features': [{
        'type': 'Feature', 'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d2f', 'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.4948977, 33.7566286], [45.494815, 33.7566699], [45.4947985, 33.7568142], [45.4947737, 33.7569071], [45.4947199, 33.7570068], [45.4946289, 33.7571374], [45.4945628, 33.7572165], [45.4945586, 33.7573711], [45.4946124, 33.7574812], [45.4947695, 33.7576015], [45.4949804, 33.7576771], [45.4951417, 33.7577218], [45.4953815, 33.7577046], [45.4956378, 33.7576771], [45.4959686, 33.7575568], [45.4962994, 33.7573505], [45.4964896, 33.7571305], [45.4966757, 33.7569517], [45.497205, 33.7566045], [45.497606, 33.7564739], [45.4981477, 33.7561439], [45.4984537, 33.7560545], [45.4985943, 33.7559926], [45.4985777, 33.7558414], [45.4984371, 33.7557038], [45.4985446, 33.7555251], [45.4986025, 33.7553532], [45.4986108, 33.7549613], [45.4986025, 33.7548513], [45.498925, 33.7541225], [45.4991566, 33.7537237], [45.4993385, 33.7534761], [45.4994791, 33.7532424], [45.4995039, 33.7530361], [45.4994791, 33.7529123], [45.4994212, 33.7527748], [45.4993633, 33.7527473], [45.4989416, 33.7527129], [45.4986273, 33.7526235], [45.4984619, 33.7526442], [45.4980815, 33.7527542], [45.4976846, 33.7529055], [45.4972215, 33.7531461], [45.4967997, 33.7532355], [45.496684, 33.7532905], [45.4968163, 33.7534349], [45.4969238, 33.7535036], [45.4969734, 33.7536137], [45.4969321, 33.7538818], [45.4967915, 33.7542256], [45.4967667, 33.7544594], [45.4969403, 33.7548169], [45.4970561, 33.7550369], [45.4970561, 33.7550575], [45.4970147, 33.7550919], [45.4967915, 33.7551057], [45.4964689, 33.7552019], [45.4962622, 33.7553532], [45.4960637, 33.7554976], [45.4956751, 33.7556282], [45.4951623, 33.7561301], [45.4948977, 33.7566286]]]]
        }, 'geometry_name': 'geom', 'properties': {'id': 9176}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d30',
        'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.4838835, 33.7406185], [45.4848858, 33.7407716], [45.485745, 33.7409417], [45.4866655, 33.7411798], [45.4877701, 33.741452], [45.4886497, 33.7416901], [45.4894884, 33.7416221], [45.4903066, 33.7413159], [45.4903271, 33.7409587], [45.4903271, 33.7403974], [45.4902043, 33.7396149], [45.4900407, 33.7388494], [45.4899384, 33.7381009], [45.490143, 33.7374715], [45.4895702, 33.7368081], [45.4893656, 33.7365529], [45.4887929, 33.7361957], [45.4886088, 33.7356173], [45.4883019, 33.735192], [45.4875246, 33.7349709], [45.4869314, 33.7345626], [45.4863995, 33.7342904], [45.4860109, 33.7347327], [45.4854177, 33.735192], [45.4847835, 33.7357024], [45.4844971, 33.7362637], [45.4843744, 33.7368591], [45.4843744, 33.7374375], [45.4844358, 33.7377607], [45.4844971, 33.73822], [45.4847222, 33.7386793], [45.4849676, 33.7390535], [45.4849472, 33.7393427], [45.4844767, 33.739802], [45.4841289, 33.7400572], [45.4839244, 33.7402103], [45.4838835, 33.7406185]]]]
        },
        'geometry_name': 'geom',
        'properties': {'id': 9202}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d31',
        'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.6879222, 33.6400663], [45.6873764, 33.6401654], [45.6869001, 33.6406941], [45.6863742, 33.6412063], [45.6860666, 33.6415946], [45.6859178, 33.6419828], [45.6858285, 33.6422554], [45.685759, 33.6425033], [45.6858682, 33.6427759], [45.6861758, 33.6429576], [45.6867513, 33.6431146], [45.6871482, 33.6429989], [45.6873467, 33.6428833], [45.6875848, 33.6428337], [45.6877932, 33.6429576], [45.6882298, 33.6429741], [45.6886962, 33.6428089], [45.6891526, 33.6424207], [45.689619, 33.6420489], [45.6899365, 33.6416607], [45.6899861, 33.641322], [45.6899861, 33.6410659], [45.690006, 33.6409585], [45.689877, 33.6408263], [45.6897281, 33.6407437], [45.6895892, 33.6406115], [45.68949, 33.6405537], [45.6892618, 33.6405207], [45.689103, 33.6404959], [45.6887656, 33.6404959], [45.6885672, 33.6404298], [45.6884382, 33.6402563], [45.6883092, 33.6400828], [45.6882496, 33.6399589], [45.6881802, 33.6399424], [45.6879222, 33.6400663]]]]
        },
        'geometry_name': 'geom',
        'properties': {'id': 9204}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d32',
        'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.4199499, 33.8354722], [45.4197042, 33.8357372], [45.4195533, 33.8359842], [45.4195921, 33.8361274], [45.4196697, 33.8362671], [45.4197473, 33.836421], [45.4200102, 33.8365857], [45.4202602, 33.8365499], [45.4204413, 33.8364533], [45.4206783, 33.8363029], [45.420855, 33.8360702], [45.4209671, 33.8358947], [45.4209585, 33.8356835], [45.4208464, 33.8355403], [45.4206438, 33.8354042], [45.4205533, 33.8353255], [45.4203852, 33.8353684], [45.4201395, 33.8353792], [45.4199499, 33.8354722]]]]
        },
        'geometry_name': 'geom',
        'properties': {'id': 9207}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d33',
        'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.5398025, 33.7238249], [45.5393872, 33.7240906], [45.5391477, 33.7246353], [45.5390518, 33.7249142], [45.5390358, 33.7251401], [45.5393872, 33.7254323], [45.5401858, 33.7254589], [45.5409524, 33.7254721], [45.5416871, 33.725326], [45.5421663, 33.7250869], [45.5425975, 33.7248877], [45.5431885, 33.7247814], [45.5435079, 33.7245423], [45.5433642, 33.7240242], [45.5429329, 33.7238249], [45.5426454, 33.7237054], [45.5425017, 33.7235991], [45.5423739, 33.7233467], [45.5421184, 33.7231076], [45.5418149, 33.7229216], [45.5416073, 33.7229216], [45.5414316, 33.7231475], [45.541208, 33.7234131], [45.5398025, 33.7238249]]]]
        },
        'geometry_name': 'geom',
        'properties': {'id': 9215}
    }, {
        'type': 'Feature',
        'id': 'vw_site_survey_poly.fid-7fc7373b_16df8d89a35_2d34',
        'geometry': {
            'type': 'MultiPolygon',
            'coordinates': [[[[45.581161, 33.74843], [45.5812488, 33.7485296], [45.5814245, 33.7486358], [45.5817679, 33.7488151], [45.5820714, 33.7490873], [45.582295, 33.7492865], [45.5829019, 33.7493795], [45.5833411, 33.7493729], [45.5834689, 33.749333], [45.5837244, 33.7492135], [45.58394, 33.7491272], [45.5841397, 33.7491936], [45.5844511, 33.7493264], [45.584555, 33.7492733], [45.5847626, 33.7491405], [45.5847306, 33.7489944], [45.5847147, 33.7488616], [45.5846188, 33.7486624], [45.584523, 33.7484233], [45.5844432, 33.7482573], [45.5842675, 33.7480714], [45.5842754, 33.7479652], [45.5843713, 33.7478191], [45.5842994, 33.7475601], [45.5841237, 33.7474937], [45.5840598, 33.7474406], [45.5839959, 33.7472945], [45.583956, 33.7472613], [45.5837005, 33.7472015], [45.5835088, 33.747009], [45.5832932, 33.7468828], [45.5830696, 33.7467234], [45.58283, 33.7467168], [45.5825186, 33.7467899], [45.5822311, 33.7468363], [45.5814884, 33.7470289], [45.5812728, 33.7473277], [45.581161, 33.7477593], [45.581161, 33.7481444], [45.581161, 33.74843]]]]
        },
        'geometry_name': 'geom',
        'properties': {'id': 9213}
    }],
    'totalFeatures': 6,
    'numberMatched': 6,
    'numberReturned': 6,
    'timeStamp': '2019-10-23T14:04:38.573Z',
    'crs': {'type': 'name', 'properties': {'name': 'urn:ogc:def:crs:EPSG::4326'}}
};

describe('"getExtentFromWfsGetFeatures"', () => {
    it('works with Points', () => {
        let extent = getExtentFromWfsGetFeatures(pointJson);
        expect(extent).toHaveLength(4);
        extent.forEach(coord => expect(typeof(coord)).toBe('number'));
    });
    it('works with MultiPolygons', () => {
        let extent = getExtentFromWfsGetFeatures(multyPolygonJson);
        expect(extent).toHaveLength(4);
        extent.forEach(coord => expect(typeof(coord)).toBe('number'));
    });
});
